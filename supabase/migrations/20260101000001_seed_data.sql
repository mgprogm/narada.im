-- Seed Data (Optional)
-- Sample FAQ data for testing the SmartSales Assistant

-- This file contains example FAQs in Thai for testing purposes
-- You can run this after setting up a test user account

-- NOTE: Replace 'YOUR_USER_ID_HERE' with an actual user UUID from auth.users
-- To get your user ID after signup, run: SELECT id FROM auth.users WHERE email = 'your@email.com';

-- Example FAQs for an online clothing shop
DO $$
DECLARE
  test_user_id UUID;
BEGIN
  -- Try to get a test user (first user in the system)
  -- In production, remove this and manually insert with correct user_id
  SELECT id INTO test_user_id FROM auth.users LIMIT 1;

  IF test_user_id IS NOT NULL THEN
    -- Insert sample FAQs
    INSERT INTO public.faqs (user_id, category, question, answer, is_active) VALUES
    -- การจัดส่ง (Shipping)
    (test_user_id, 'การจัดส่ง', 'จัดส่งฟรีไหม', 'ค่ะ เราจัดส่งฟรีสำหรับยอดซื้อตั้งแต่ 500 บาทขึ้นไป ถ้าซื้อไม่ถึง 500 บาทค่าส่งจะอยู่ที่ 50 บาทค่ะ', true),
    (test_user_id, 'การจัดส่ง', 'ใช้เวลาจัดส่งนานไหม', 'ปกติจัดส่งภายใน 2-3 วันทำการค่ะ สำหรับกรุงเทพฯและปริมณฑล ต่างจังหวัดประมาณ 3-5 วันทำการค่ะ', true),
    (test_user_id, 'การจัดส่ง', 'ส่งแบบไหนบ้าง', 'เราส่งทาง Kerry Express และ Flash Express ค่ะ ลูกค้าสามารถติดตามพัสดุได้ผ่านเลขแทรคกิ้งที่เราจะส่งให้ค่ะ', true),

    -- สินค้า (Products)
    (test_user_id, 'สินค้า', 'สินค้ามีของแท้ไหม', 'มีของแท้ 100% ค่ะ เราเป็นตัวแทนจำหน่ายอย่างเป็นทางการ มีใบรับประกันและกล่องครบค่ะ', true),
    (test_user_id, 'สินค้า', 'มีสินค้าตัวนี้สีอื่นไหม', 'ขณะนี้มีให้เลือก 5 สี ค่ะ คือ ดำ ขาว กรม ชมพู และเทา ส่วนสีน้ำตาล-ครีมหมดสต็อกไปก่อนค่ะ', true),
    (test_user_id, 'สินค้า', 'ของหมดหรือยัง', 'ยังมีค่ะ สินค้าที่แสดงบนเพจคือของที่มีสต็อกอยู่จริง ถ้าหมดแล้วจะมีป้าย "Sold Out" กำกับไว้ค่ะ', true),
    (test_user_id, 'สินค้า', 'ไซส์วัดยังไง', 'แนะนำให้วัดเสื้อตัวที่ใส่อยู่เทียบกับไซส์ชาร์ตนะคะ หรือจะวัดรอบอก รอบเอว รอบสะโพก แล้วเทียบก็ได้ค่ะ มีไซส์ชาร์ตละเอียดในรูปสินค้าค่ะ', true),

    -- การชำระเงิน (Payment)
    (test_user_id, 'การชำระเงิน', 'จ่ายเงินยังไง', 'รับชำระผ่านพร้อมเพย์ โอนผ่านธนาคาร หรือเก็บเงินปลายทาง (COD) ค่ะ', true),
    (test_user_id, 'การชำระเงิน', 'เก็บเงินปลายทางได้ไหม', 'ได้ค่ะ แต่จะมีค่าธรรมเนียม COD เพิ่ม 20 บาท และใช้ได้กับยอดซื้อตั้งแต่ 300 บาทขึ้นไปค่ะ', true),
    (test_user_id, 'การชำระเงิน', 'โอนเงินแล้วต้องทำยังไง', 'หลังโอนเงิน แคปหน้าจอการโอนส่งมาทางแชทเลยค่ะ พร้อมแจ้งชื่อ-ที่อยู่จัดส่ง เราจะดำเนินการจัดส่งให้ภายใน 24 ชั่วโมงค่ะ', true),

    -- การคืนสินค้า (Returns)
    (test_user_id, 'การคืนสินค้า', 'เปลี่ยนคืนได้ไหม', 'เปลี่ยน-คืนได้ภายใน 7 วันค่ะ โดยสินค้าต้องอยู่ในสภาพเดิม ไม่ผ่านการใช้งาน และมีป้ายติดอยู่ค่ะ', true),
    (test_user_id, 'การคืนสินค้า', 'ของเสียต้องทำยังไง', 'ถ้าได้รับสินค้าเสียหายหรือส่งผิด ถ่ายรูปส่งมาภายใน 24 ชั่วโมง เราจะเปลี่ยนสินค้าใหม่ให้ฟรีค่ะ รวมถึงค่าส่งด้วยค่ะ', true),
    (test_user_id, 'การคืนสินค้า', 'คืนเงินได้ไหม', 'ได้ค่ะ ถ้าสินค้ามีปัญหาจากทางร้าน เราจะคืนเงินเต็มจำนวนภายใน 7 วันทำการค่ะ', true),

    -- ทั่วไป (General)
    (test_user_id, 'ทั่วไป', 'ร้านเปิดกี่โมง', 'ร้านเปิดทุกวันค่ะ จันทร์-ศุกร์ 9.00-18.00 น. เสาร์-อาทิตย์ 10.00-17.00 น. แต่สั่งของออนไลน์ได้ตลอด 24 ชั่วโมงค่ะ', true),
    (test_user_id, 'ทั่วไป', 'มีหน้าร้านไหม', 'มีค่ะ อยู่ที่สยามสแควร์ ชั้น 3 โซน B แต่แนะนำให้สั่งออนไลน์จะสะดวกกว่าค่ะ', true),
    (test_user_id, 'ทั่วไป', 'ใส่โค้ดส่วนลดยังไง', 'เวลาสั่งของ ให้ใส่โค้ดส่วนลดในช่อง "รหัสโปรโมชั่น" ก่อนชำระเงินนะคะ โค้ดใช้ได้ 1 ครั้งต่อ 1 คำสั่งซื้อค่ะ', true),

    -- โปรโมชั่น (Promotions)
    (test_user_id, 'โปรโมชั่น', 'มีโปรอะไรบ้าง', 'ตอนนี้มีโปร ซื้อ 2 ชิ้นลด 10% ซื้อ 3 ชิ้นขึ้นไปลด 15% ค่ะ และมีของแถมสำหรับยอดซื้อตั้งแต่ 1000 บาทค่ะ', true),
    (test_user_id, 'โปรโมชั่น', 'โค้ดส่วนลดอะไรบ้าง', 'ตอนนี้มีโค้ด WELCOME10 ลด 10% สำหรับลูกค้าใหม่ ใช้ได้กับยอดซื้อตั้งแต่ 500 บาทค่ะ', true),
    (test_user_id, 'โปรโมชั่น', 'สมาชิกได้ส่วนลดไหม', 'ได้ค่ะ สมาชิกจะได้สะสมแต้มทุกครั้งที่ซื้อ 100 บาทได้ 1 แต้ม นำมาแลกส่วนลดครั้งต่อไปได้ค่ะ';

    RAISE NOTICE 'Seed data inserted successfully for user %', test_user_id;
  ELSE
    RAISE NOTICE 'No test user found. Please create a user first before running seed data.';
  END IF;
END $$;
